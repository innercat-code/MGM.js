# MGM.js
Mini Game Maker

## Описание

Библиотека для помощи в создании игр на `javascript`.

**|| ПРОЕКТ НАХОДИТСЯ В РАЗРАБОТКЕ (80%) ||**

- Классы `MGM` и `MGMObject` - готовы, но еще могут дорабатываться.
- `MGMMapEditor` - редактор карт. В разработке.
- `Инструкция` - пока толком нет.
- `Примеры` - в разработке.

____

## Инструкция

Скачать `MGM.js`, создать файл `index.html`, и написать там код:

```html
<script src="MGM.js"></script>
<script>
    const Mgm = new MGM()
</script>
```

Создать игру с юнитом, который выглядит как зеленый круг, и управляется клавишами WASD

```html
<script src="MGM.js"></script>
<script>
    const Mgm = new MGM({
        name: 'My game',
    })

    Mgm.object['unit'] = {
        init: function() {
            this.drawCircle = {
                radius: 30,
                fillColor: 'green',
            }
        },
        update: function() {
            this.wasd(5)
        },
    }
</script>
```

Создать игру с юнитом из изображения `img/player.png`, размер которого пропорционально изменен, и который управляется стрелками клавиатуры. Так же с деревьями `img/tree1.png`, `img/tree2.png`, `img/tree3.png`, которых создано 50 клонов со случайной картинкой и случайными координатами в диапазоне `2000px`.

```html
<script src="MGM.js"></script>
<script>
    const Mgm = new MGM({
        name: 'My game',
    })

    Mgm.object['unit'] = {
        pic: 'img/player.png', 
        init: function() {
            this.size = 0.2
            this.physics = 'unit'
        },
        update: function() {
            this.arrows(5)
        },
    }

    Mgm.object['tree'] = {
        pics: {
            t1: 'img/tree1.png',
            t2: 'img/tree2.png',
            t3: 'img/tree3.png',
        },
        init: function() {
            this.active = false
            this.size = 0.5
            this.physics = 'wall'
        },
        start: function() {
            for (let i = 0; i < 50; i++)
                this.clone({
                    x: Mgm.random(-1000, 1000),
                    y: Mgm.random(-1000, 1000),
                })
        },
        stClone: function() {
            this.picName = 't'+ Mgm.random(1, 3)
        }
    }
</script>
```
____

Donate : [Yoomoney](https://yoomoney.ru/to/410018410401723)

Discord : [Discord](https://discord.gg/mzmgJqH6Vj)

____

### Поля класса MGM

`name` - Название игры. Это будет написано на вкладке браузера. (string)

`bodyColor` - Цвет фона страницы. (css)

`canvasColor` - Цвет фона канваса. (css)

`textColor` - Цвет текста игры. (css)

`ratio` - Соотношение сторон канваса, ширины к высоте. (float)

`orderY` - Сортировать объекты по координате `Y` (для 2.5D-игр). (true/false)

........

____

### Методы класса MGM

`clearGame(reObj = true)` - Очищает массивы объектов и пересоздает их заново. Если передать в метод `false`, то заново объекты не пересоздаются, но так как они инициализированы и настроены ранее, то можно создавать с них клоны.

`setScene(name)` - Сменить сцену игры. По умолчанию у всех объектов сцена равна пустой строке, и сцена игры тоже.В поле `Mgm.scene` можно задать сцену, а через `Mgm.setScene(name)` сменить на другую. Объектам, привязанным к другой сцене нужно задать соответствующее значение в поле `scene`.

`resizeWin()` - Пересчитать размеры объектов на `html-странице`. Включается при изменении экрана. Так же метод надо вызывать, если у `html-объектов` изменены аттрибуты для настройки положения `mgm-left`, `mgm-top`, и т.д.

`firstV(m)` - Возвращает первый элемент из объекта. В `Mgm` используется для получения первой картинки из нескольких заданных.

`firstJ(m)` - Возвращает ключ первого элемента объекта.

`loadScript(url)` - Подгружает к странице скрипт.

`pause()` - Остановка игры на паузу.

`run()` - Запуск игры, либо снятие ее с паузы.

`stop(txt)` - Полная остановка игры. Пауза, с которой игру нельзя заново запустить методом `Mgm.run()`. Если в метод передать строку, то она выведется на экран при остановке. Иначе будет показан текст из поля `stopText` при создании экземпляра `MGM`.

`restart(url = '')` - Перезапустить `html-страницу` с новым `url`.

`urlParse()` - Разобрать `url-адрес` в объект.

`setSave(prm)` - Сохранить в `localStorage['MgmSave']` объект параметров в `JSON`. Сохранение привязывается к адресной строке браузера `location.pathname`.

`getSave()` - Получить объект из сохранения `localStorage['MgmSave']`.

`random(min, max)` - Получить случайное число из указанного диапазона двух чисел. Если в метод передать только единицу `random(1)`, то вернется в случайном порядке `1` или `-1`. Если в метод не передать ничего, то вернется в случайном порядке `true` либо `false`.

`angleXY(x1, y1, x2, y2)` - Получить угол между двумя точками.

`angleObj(obj1, obj2)` - Получить угол между двумя объектами.

`distanceXY(x1, y1, x2, y2)` - Получить расстояние между двумя точками.

`distanceObj(obj1, obj2)` - Получить расстояние между двумя объектами.

`clone(prm)` - Сделать клон игрового объекта. Метод принимает объект `clone({})`. Если объект уже существует, то надо указать его имя в поле `name`. Если нет, то будет создан новый объект. Переданные в параметры поля будут присвоены клону, будто были переданы в методе `init`. Так же можно задавать в полях методы update и другие, они так же будут присвоены клону и будут использованы классом.

`newClone(prm)` - Сделать клон игрового объекта. Метод принимает объект `clone({})`. Если объект уже существует, то надо указать его имя в поле `name`. Если нет, то будет создан новый объект. Переданные в параметры поля будут присвоены клону, будто были переданы в методе `init`. Так же можно задавать в полях методы update и другие, они так же будут присвоены клону и будут использованы классом.

`getObj(prm, key = 'name')` - Получить игровой объект по указанному значению поля. Если имя поля не указано, то ищет объект по полю `name`.

`getObjs(prm, key = 'name')` - Получить игровые объекты по указанному значению поля. Если имя поля не указано, то ищет объекты по полю `name`. Если в метод не передать ничего, то вернет все игровые объекты с `active = true`.

`getStep(angle, dist)` - Получить координаты по углу и расстоянию.

`round(n, t)` - Округлить число с заданной точностью.

`log(s)` - Вывести сообщение в собственную консоль. Консоль включается при создании экземпляра `MGM` в поле `log: true`.

`logPrm(n, v)` - Вывести параметр в собственную консоль. Консоль включается при создании экземпляра `MGM` в поле `log: true`.

`lim(v, min = 0, max = 1)` - Ограничить число по верхней и нижней границе. Если не передать границы, то число ограничивается диапазоном от ноля до единицы.

......

____

### Поля MGMObject

`name` - Имя объекта.

......

____

### Методы MGMObject

`setAnim(name, frame = 0)` - Задает анимацию персонажа, указанную в объекте при его создании. 